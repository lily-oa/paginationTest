{"version":3,"sources":["all.js"],"names":["jsonUrl","content","document","querySelector","pageid","getElementById","jsonData","getData","axios","get","then","response","data","result","records","pagination","nowPage","console","log","dataTotal","length","perpage","pageTotal","Math","ceil","currentPage","minData","maxData","forEach","item","index","num","push","page","hasPage","hasNext","displayData","pageBtn","str"],"mappings":";;AAAA,IAAMA,OAAO,GAAE,2FAAf;AACA,IAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAhB;AACA,IAAMC,MAAM,GAAGF,QAAQ,CAACG,cAAT,CAAwB,QAAxB,CAAf;AACA,IAAIC,QAAQ,GAAG,EAAf;;AAEA,SAASC,OAAT,GAAkB;AAChBC,EAAAA,KAAK,CAACC,GAAN,CAAUT,OAAV,EACGU,IADH,CACQ,UAASC,QAAT,EAAkB;AACxBL,IAAAA,QAAQ,GAAGK,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqBC,OAAhC,CADwB,CAExB;;AACAC,IAAAA,UAAU,CAACT,QAAD,EAAW,CAAX,CAAV;AACD,GALD;AAMD;;AACDC,OAAO;;AAEP,SAASQ,UAAT,CAAoBT,QAApB,EAA8BU,OAA9B,EAAsC;AACpCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ,EADoC,CAEpC;;AACA,MAAMG,SAAS,GAAGb,QAAQ,CAACc,MAA3B,CAHoC,CAIpC;AAEA;AACA;;AACA,MAAMC,OAAO,GAAG,CAAhB,CARoC,CAUpC;AACA;;AACA,MAAMC,SAAS,GAAGC,IAAI,CAACC,IAAL,CAAUL,SAAS,GAAGE,OAAtB,CAAlB,CAZoC,CAcpC;;AACA,MAAII,WAAW,GAAGT,OAAlB,CAfoC,CAiBpC;AACA;AACA;AACA;;AAEA,MAAGS,WAAW,GAAGH,SAAjB,EAA2B;AACzBG,IAAAA,WAAW,GAAGH,SAAd;AACD,GAxBmC,CA0BpC;;;AACA,MAAMI,OAAO,GAAID,WAAW,GAAGJ,OAAf,GAA0BA,OAA1B,GAAoC,CAApD;AACA,MAAMM,OAAO,GAAIF,WAAW,GAAGJ,OAA/B,CA5BoC,CA8BpC;;AACA,MAAMT,IAAI,GAAG,EAAb,CA/BoC,CAgCpC;AACA;;AACAN,EAAAA,QAAQ,CAACsB,OAAT,CAAiB,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAChC;AACA,QAAMC,GAAG,GAAID,KAAK,GAAG,CAArB,CAFgC,CAGhC;AACA;;AACA,QAAGC,GAAG,IAAIL,OAAP,IAAkBK,GAAG,IAAIJ,OAA5B,EAAoC;AAClCf,MAAAA,IAAI,CAACoB,IAAL,CAAUH,IAAV;AACD;AACF,GARD,EAlCoC,CA4CpC;;AACA,MAAMI,IAAI,GAAG;AACXX,IAAAA,SAAS,EAATA,SADW;AAEXG,IAAAA,WAAW,EAAXA,WAFW;AAGXS,IAAAA,OAAO,EAAET,WAAW,GAAG,CAHZ;AAIXU,IAAAA,OAAO,EAAEV,WAAW,GAAGH;AAJZ,GAAb,CA7CoC,CAmDpC;;AACAc,EAAAA,WAAW,CAACxB,IAAD,CAAX;AACAyB,EAAAA,OAAO,CAACJ,IAAD,CAAP;AACD;;AAED,SAASG,WAAT,CAAqBxB,IAArB,EAA0B;AACxB,MAAI0B,GAAG,GAAG,EAAV;AACA1B,EAAAA,IAAI,CAACgB,OAAL,CAAa,UAACC,IAAD,EAAU;AACrBS,IAAAA,GAAG,ghDAAH;AAiCD,GAlCD;AAmCD","file":"all.js","sourcesContent":["const jsonUrl ='https://raw.githubusercontent.com/hsiangfeng/JSHomeWork/master/JSON/datastore_search.json';\nconst content = document.querySelector('.content');\nconst pageid = document.getElementById('pageid');\nlet jsonData = {};\n\nfunction getData(){\n  axios.get(jsonUrl)\n    .then(function(response){\n    jsonData = response.data.result.records;\n    //console.log(jsonData);\n    pagination(jsonData, 1);\n  });\n}\ngetData();\n\nfunction pagination(jsonData, nowPage){\n  console.log(nowPage);\n  // 取得全部資料長度\n  const dataTotal = jsonData.length;\n  //console.log(dataTotal);\n  \n  // 設定要顯示在畫面上的資料數量\n  // 預設每一頁只顯示5筆資料\n  const perpage = 5;\n  \n  // page 按鈕總數量公式 總資料數量 / 每一頁要顯示的資料\n  // 這邊要注意，因為有可能會出現餘數，所以要無條件進位。\n  const pageTotal = Math.ceil(dataTotal / perpage);\n  \n  // 當前頁數，對應現在當前頁數\n  let currentPage = nowPage;\n  \n  // 因為要避免當前頁數筆總頁數還要多，假設今天總頁數是 3 筆，就不可能是 4 或 5\n  // 所以要在寫入一個判斷避免這種狀況。\n  // 當\"當前頁數\"比\"總頁數\"大的時候，\"當前頁數\"就等於\"總頁數\"\n  // 注意這一行在最前面並不是透過 nowPage 傳入賦予與 currentPage，所以才會寫這一個判斷式，但主要是預防一些無法預期的狀況，例如：nowPage 突然發神經？！\n  \n  if(currentPage > pageTotal){\n    currentPage = pageTotal;\n  }\n  \n  // 由前面可知最小數字為6，所以用答案來回推式\n  const minData = (currentPage * perpage) - perpage + 1;\n  const maxData = (currentPage * perpage);\n  \n  // 先建立新陣列\n  const data = [];\n  // 這邊將會使用 ES6 forEach 做資料處理\n  // 首先必須使用索引來判斷資料位子，所以要使用index\n  jsonData.forEach((item, index) => {\n    //獲取陣列索引，但因為索引是從 0 開始所以要 +1\n    const num  = index + 1;\n    // 這邊判斷式會稍微複雜一點\n    // 當 num 比 minData 大且又小於 maxData 就push進去新陣列。\n    if(num >= minData && num <= maxData){\n      data.push(item);\n    }\n  });\n  \n  // 用物件方式傳遞資料\n  const page = {\n    pageTotal,\n    currentPage,\n    hasPage: currentPage > 1,\n    hasNext: currentPage < pageTotal,\n  }\n  // console.log(page);\n  displayData(data);\n  pageBtn(page);\n}\n\nfunction displayData(data){\n  let str = '';\n  data.forEach((item) => {\n    str += `\n        <div class=\"col-md-6 py-2 px-1\"><!--卡片頭-->\n        <div class=\"card\">\n          <div class=\"card bg-dark text-white text-left\">\n            <img class=\"card-img-top bg-cover\" height=\"200px\" src=\"../assets/images/三民區/中都唐榮磚窯廠01.jpg\">\n            <div \n            class=\"\n                    card-img-overlay\n                    d-flex\n                    justify-content-between\n                    align-items-end \n                    p-0\n                    px-3\n                    \"\n            style=\"\n                    background-color:rgba(0, 0, 0, .2)\n                  \"\n            >\n              <h5 class=\"card-img-title-lg\">高雄願景館</h5>\n              <h5 class=\"card-img-title-sm\">三民區</h5>  \n            </div>\n          </div>\n          <div class=\"card-body text-left\">\n            <p class=\"card-p-text\"><i class=\"far fa-clock fa-clock-time\"></i>&nbsp;營業時間</p>\n            <p class=\"card-p-text\"><i class=\"fas fa-map-marker-alt fa-map-gps\"></i>&nbsp;住址</p>\n            <div class=\"d-flex justify-content-between align-items-end\">\n              <p class=\"card-p-text\"><i class=\"fas fa-mobile-alt fa-mobile\"></i>&nbsp;電話</p>\n              <p class=\"card-p-text\"><i class=\"fas fa-tags text-warning\"></i>&nbsp;</p>\n            </div>\n          </div>\n        </div>\n      </div><!--卡片尾-->\n    `;\n  });\n}"]}